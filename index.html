<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="dungeonBuilder" ng-controller="main">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Dungeon Builder</title>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js" type="text/javascript"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-cookies.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-animate.js"></script>
    <script src="ui-bootstrap-tpls-2.1.3.min.js" type="text/javascript"></script>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-svg-round-progressbar/0.4.4/roundProgress.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.5.0/fabric.min.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.2/Chart.min.js" type="text/javascript"></script>
    <script src="controller.js" type="text/javascript"></script>
    <link href='css/style.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div id='rightPanel' style="position:absolute; bottom: 0; right: 0;width: 512px;">
        <div id='narrationContainer' style="width: 512px; height: 300px; float: top; overflow: scroll;"></div>
    </div>
    <uib-tabset>
        <uib-tab heading="Summary">
            <div style="float: left;">
            <div class="unitBox">
              Word of your dungeon has spread far and wide. Your reputation allows you to recruit minions, monsters and acolytes to improve your dungeon.<br/>
              You currently have <span ng-bind="reputation"></span> reputation.</br>
              You earn <span ng-bind="reputationRate"></span> reputation per second.<br />
              Dungeon Level <span ng-bind="dungeonLevel"></span><br />
              (higher dungeon levels attract stronger adventurers)<br />
              Progress to next dungeon level:<br />
              <uib-progressbar class="progress-bar-custom" value="tierProgressPercent">{{tierETA}} {{tierProgressPercentRounded}}%</uib-progressbar>
              Space: <span id="population" ng-bind="population"></span>/<span id="maxPopulation" ng-bind="maxPopulation"></span><br/>
              Empty rooms: <span ng-bind="emptyRooms"></span><br />
              <button type="button" ng-click="closeDungeon()" ng-bind="closeDungeonText">Close Dungeon</button><br />
            </div>
            <div class="unitBox">
              Minions dig additional rooms in your dungeon.<br/>
              Rooms limit how many units you can have.<br />
              You currently have <span id="smallMinionCount" ng-bind="smallMinions"></span> small minions.<br/>
              You currently have <span id="minionCount" ng-bind="minions"></span> minions.<br/>
              You currently have <span id="bigMinionCount" ng-bind="bigMinions"></span> big minions.<br/>
              You currently have <span ng-bind="hugeMinions"></span> huge minions.<br/>
            </div>
            <div class="unitBox">
              Monsters protect your dungeon, killing adventurers that enter. Of these, <span id="monsterActiveCount" ng-bind="monstersActive"></span> are active.<br/>
              You currently have <span id="smallMonsterCount" ng-bind="smallMonsters"></span> small monsters.<br/>
              You currently have <span id="monsterCount" ng-bind="monsters"></span> monsters.<br>
              You currently have <span id="bigMonsterCount" ng-bind="bigMonsters"></span> big monsters.<br/>
              You currently have <span ng-bind="hugeMonsters"></span> huge monsters.<br/>
            </div>
            <div class="unitBox">
              Acolytes go out and teach of your power, gaining you reputation.<br/>
              You currently have <span id="smallAcolyteCount" ng-bind="smallAcolytes"></span> small acolytes.<br/>
              You currently have <span id="acolyteCount" ng-bind="acolytes"></span> acolytes.<br>
              You currently have <span id="bigAcolyteCount" ng-bind="bigAcolytes"></span> big acolytes.<br/>
              You currently have <span ng-bind="hugeAcolytes"></span> huge acolytes.<br/>
            </div>
            <div class="unitBox">
              <div>
                Adventurers are coming to your dungeon hoping to steal your treasure. The more treasure you have the more likely adventurers are to come and try to steal it, so make sure to guard it well with monsters.
              </div>
              <span id="adventurerCount" ng-bind="adventurers"></span> adventurers have died in your dungeon.<br/>
              You have hoarded <span id="treasureCount" ng-bind="treasure"></span> treasures.
            </div>
            <div class="unitBox" id="roomProgressPanel">
                Excavation progress:<br />
                <uib-progressbar class="progress-bar-custom" value="roomProgressPercent">{{roomETA}} {{roomProgressPercentRounded}}%</uib-progressbar>
            </div>
            </div>
            <div style="float: left;">
            <div class="unitBox">
                <button ng-click="dungeon.razeTown()">Raze Town</button><br />
                <button ng-click="dungeon.diplomacy()">Diplomacy</button><br />
                Razing towns attracts more adventurers. Diplomacy reduces how many adventurers show up.<br />
                Current adventurer multiplier: {{adventurerMultiplier}}%<br />
                <button ng-click="dungeon.ritual()">Ritual</button><br />
                A ritual increases your available reputation<br />
                <button ng-click="dungeon.disintegrate()">Disintegrate</button><br />
                Disintegration helps your minions dig rooms<br />
            </div>
            </div>
        </uib-tab>
        <uib-tab heading="Minions">
            <div style="float: left;">
            <div class="unitBox">
              Word of your dungeon has spread far and wide. Your reputation allows you to recruit minions, monsters and acolytes to improve your dungeon.<br/>
              You currently have <span ng-bind="reputation"></span> reputation.</br>
              You earn <span ng-bind="reputationRate"></span> reputation per second.<br />
              Space: <span id="population" ng-bind="population"></span>/<span id="maxPopulation" ng-bind="maxPopulation"></span><br/>
              Empty rooms: <span ng-bind="emptyRooms"></span><br />
            </div>
            <div class="unitBox">
              Minions dig additional rooms in your dungeon.<br/>
              Rooms limit how many units you can have.<br />
              Excavation progress:<br />
              <uib-progressbar class="progress-bar-custom" value="roomProgressPercent">{{roomETA}} {{roomProgressPercentRounded}}%</uib-progressbar>
              Your dungeon has <span id="roomCount" ng-bind="rooms"></span> rooms.<br/>
            </div>
            <div class="unitBox">
              You currently have <span id="smallMinionCount" ng-bind="smallMinions"></span> small minions, which contribute 10 labor/s. They take up 5 space each and cost 375 reputation.<br/>
              Progress towards next small minion:<br />
              <uib-progressbar class="progress-bar-custom" value="smallUnitProgressPercent">{{smallUnitETA}} {{smallUnitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllSmallMinions" ng-click="dungeon.buyAllSmallMinions()" ng-bind="buyAllSmallMinionsText">Buy All</button><button id="buyRoomOfSmallMinions" ng-click="dungeon.buyRoomOfSmallMinions()" ng-bind="buyRoomOfSmallMinionsText">Fill Room</button><button id="buySmallMinion" ng-click="dungeon.buySmallMinion()">Buy Mini-on</button><br /><button id="sellSmallMinion" ng-click="dungeon.sellSmallMinion()">Dismiss Mini-on</button><button ng-click="dungeon.sellRoomOfSmallMinions()">Dismiss Room</button><br/>
            </div>
            <div class="unitBox">
              You currently have <span id="minionCount" ng-bind="minions"></span> minions, which contribute 160 labor/s. They take up 10 space each and cost 4k reputation.<br/>
              Progress towards next minion:<br />
              <uib-progressbar class="progress-bar-custom" value="unitProgressPercent">{{unitETA}} {{unitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllMinions" ng-click="dungeon.buyAllMinions()" ng-bind="buyAllMinionsText">Buy All</button><button id="buyRoomOfMinions" ng-bind="buyRoomOfMinionsText" ng-click="dungeon.buyRoomOfMinions()">Fill Room</button><button id="buyMinion" ng-click="dungeon.buyMinion()">Buy Minion</button><br /><button id="sellMinion" ng-click="dungeon.sellMinion()">Dismiss Minion</button><button ng-click="dungeon.sellRoomOfMinions()">Dismiss Room</button><br/>
            </div>
            </div>
            <div style="float: left;">
            <div class="unitBox">
              You currently have <span id="bigMinionCount" ng-bind="bigMinions"></span> big minions, which contribute 2.56k labor/s. They take up 25 space each and cost 477.68k reputation.<br/>
              Progress towards next big minion:<br />
              <uib-progressbar class="progress-bar-custom" value="bigUnitProgressPercent">{{bigUnitETA}} {{bigUnitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllBigMinions" ng-click="dungeon.buyAllBigMinions()" ng-bind="buyAllBigMinionsText">Buy All</button><button id="buyRoomOfBigMinions" ng-bind="buyRoomOfBigMinionsText" ng-click="dungeon.buyRoomOfBigMinions()">Fill Room</button><button id="buyBigMinion" ng-click="dungeon.buyBigMinion()">Buy Big Minion</button><br /><button id="sellBigMinion" ng-click="dungeon.sellBigMinion()">Dismiss Big Minion</button><button ng-click="dungeon.sellRoomOfBigMinions()">Dismiss Room</button><br/>
            </div>
            <div class="unitBox">
              You currently have <span id="hugeMinionCount" ng-bind="hugeMinions"></span> huge minions, which contribute 40.96k labor/s. They take up 50 space each and cost 71.01M reputation.<br/>
              Progress towards next huge minion:<br />
              <uib-progressbar class="progress-bar-custom" value="hugeUnitProgressPercent">{{hugeUnitETA}} {{hugeUnitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllHugeMinions" ng-click="dungeon.buyAllHugeMinions()" ng-bind="buyAllHugeMinionsText">Buy All</button><button id="buyHugeMinion" ng-click="dungeon.buyHugeMinion()">Buy Huge Minion</button><button id="sellHugeMinion" ng-click="dungeon.sellHugeMinion()">Dismiss Huge Minion</button><br/>
            </div>
            <div class="unitBox" style="float: top;">
                Progress towards next upgrade:<br />
                <uib-progressbar class="progress-bar-custom" value="minionUpgradeProgressPercent">{{minionUpgradeETA}} {{minionUpgradeProgressPercentRounded}}%</uib-progressbar>
                <button id='upgradeMinions' ng-click="dungeon.upgradeMinions()" ng-bind="upgradeMinionsText">Upgrade Minions</button><br/>
                Upgrading improves effectiveness of all minion units by 20%<br />
                Current Effectiveness: <span ng-bind="minionMultiplier"></span>%<br /><br />
                Progress towards next combat upgrade:<br />
                <uib-progressbar class="progress-bar-custom" value="unitCombatUpgradeProgressPercent">{{unitCombatUpgradeETA}} {{unitCombatUpgradeProgressPercentRounded}}%</uib-progressbar>
                <button ng-click="dungeon.upgradeUnitCombat()" ng-bind="upgradeUnitCombatText">Upgrade Minions and Acolytes in Combat</button><br/>
                Upgrading increases effectiveness of all non-monster units in combat by 2%<br />
                Current Effectiveness: <span ng-bind="unitCombatMultiplier"></span>%
            </div>
            </div>
            <div class="unitBox" style="float: left; height: '400';">
                <canvas id="minionChart" width="400" height="400"></canvas>
            </div>
        </uib-tab>
        <uib-tab heading="Monsters">
            <div style="float: left;">
            <div class="unitBox">
              Word of your dungeon has spread far and wide. Your reputation allows you to recruit minions, monsters and acolytes to improve your dungeon.<br/>
              You currently have <span ng-bind="reputation"></span> reputation.</br>
              You earn <span ng-bind="reputationRate"></span> reputation per second.<br />
              Space: <span id="population" ng-bind="population"></span>/<span id="maxPopulation" ng-bind="maxPopulation"></span><br/>
              Empty rooms: <span ng-bind="emptyRooms"></span><br />
            </div>
            <div class="unitBox">
              Monsters protect your dungeon, killing adventurers that enter. Of these, <span id="monsterActiveCount" ng-bind="monstersActive"></span> are active.<br/>
              Level 1 adventurers have 13 hp, deal 3-10 dmg.<br/>
              Level 39 adventurers have 42.58k hp, deal 9.82k-32.76k dmg<br/>
            </div>
            <div class="unitBox">
              You currently have <span id="smallMonsterCount" ng-bind="smallMonsters"></span> small Monsters. 4 hp, deal 1 dmg. They take up 5 space each and cost 375 reputation.<br/>
              Progress towards next small monster:<br />
              <uib-progressbar class="progress-bar-custom" value="smallUnitProgressPercent">{{smallUnitETA}} {{smallUnitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllSmallMonsters" ng-click="dungeon.buyAllSmallMonsters()" ng-bind="buyAllSmallMonstersText">Buy All</button><button id="buyRoomOfSmallMonsters" ng-bind="buyRoomOfSmallMonstersText" ng-click="dungeon.buyRoomOfSmallMonsters()">Fill Room</button><button id="buySmallMonster" ng-click="dungeon.buySmallMonster()">Buy Small Monster</button><br /><button id="sellSmallMonster" ng-click="dungeon.sellSmallMonster()">Dismiss Small Monster</button><button ng-click="dungeon.sellRoomOfSmallMonsters()">Dismiss Room</button><br/>
            </div>
            <div class="unitBox">
              You currently have <span id="monsterCount" ng-bind="monsters"></span> monsters. 64 hp, deal 4-15 dmg. They take up 10 space each and cost 4k reputation.<br>
              Progress towards next monster:<br />
              <uib-progressbar class="progress-bar-custom" value="unitProgressPercent">{{unitETA}} {{unitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllMonsters" ng-click="dungeon.buyAllMonsters()" ng-bind="buyAllMonstersText">Buy All</button><button id="buyRoomOfMonsters" ng-bind="buyRoomOfMonstersText" ng-click="dungeon.buyRoomOfMonsters()">Fill Room</button><button id="buyMonster" ng-click="dungeon.buyMonster()">Buy Monster</button><br /><button id="sellMonster" ng-click="dungeon.sellMonster()">Dismiss Monster</button><button ng-click="dungeon.sellRoomOfMonsters()">Dismiss Room</button><br/>
            </div>
            </div>
            <div style="float: left;">
            <div class="unitBox">            
              You currently have <span id="bigMonsterCount" ng-bind="bigMonsters"></span> big Monsters. 1.02k hp, deal 64-240 dmg. They take up 25 space each and cost 477.68k reputation.<br/>
              Progress towards next big monster:<br />
              <uib-progressbar class="progress-bar-custom" value="bigUnitProgressPercent">{{bigUnitETA}} {{bigUnitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllBigMonsters" ng-click="dungeon.buyAllBigMonsters()" ng-bind="buyAllBigMonstersText">Buy All</button><button id="buyRoomOfBigMonsters" ng-bind="buyRoomOfBigMonstersText" ng-click="dungeon.buyRoomOfBigMonsters()">Fill Room</button><button id="buyBigMonster" ng-click="dungeon.buyBigMonster()">Buy Big Monster</button><br /><button id="sellBigMonster" ng-click="dungeon.sellBigMonster()">Dismiss Big Monster</button><button ng-click="dungeon.sellRoomOfBigMonsters()">Dismiss Room</button><br/>
            </div>
            <div class="unitBox">
              You currently have <span id="hugeMonsterCount" ng-bind="hugeMonsters"></span> huge monsters. 16.38k hp, deal 1.02k-3.84k dmg. They take up 50 space each and cost 71.01M reputation.<br/>
              Progress towards next huge monster:<br />
              <uib-progressbar class="progress-bar-custom" value="hugeUnitProgressPercent">{{hugeUnitETA}} {{hugeUnitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllHugeMonsters" ng-click="dungeon.buyAllHugeMonsters()" ng-bind="buyAllHugeMonstersText">Buy All</button><button id="buyHugeMonster" ng-click="dungeon.buyHugeMonster()">Buy Huge Monster</button><button id="sellHugeMonster" ng-click="dungeon.sellHugeMonster()">Dismiss Huge Monster</button><br/>
            </div>
            <div class="unitBox">
                Progress towards next upgrade:<br />
                <uib-progressbar class="progress-bar-custom" value="monsterUpgradeProgressPercent">{{monsterUpgradeETA}} {{monsterUpgradeProgressPercentRounded}}%</uib-progressbar>
                <button id='upgradeMonster' ng-click="dungeon.upgradeMonsters()" ng-bind="upgradeMonstersText">Upgrade Monsters</button><br/>
                Upgrading makes monsters level 20% faster<br />
                Current Leveling Speed: <span ng-bind="monsterXPMultiplier"></span>%<br/><br/>
                Progress towards next upgrade:<br />
                <uib-progressbar class="progress-bar-custom" value="killBonusUpgradeProgressPercent">{{killBonusUpgradeETA}} {{killBonusUpgradeProgressPercentRounded}}%</uib-progressbar>
                <button ng-click="dungeon.upgradeKillBonus()" ng-bind="upgradeKillBonusText">Upgrade Kill Bonus</button><br/>
                Upgrading makes killing adventurers grant you reputation!<br />
                Current bonus per kill:<br />
                {{humanize(killBonus)}} if killed by a small unit<br />
                {{humanize(killBonus*16)}} if killed by a normal unit<br />
                {{humanize(killBonus*256)}} if killed by a big unit<br />
                {{humanize(killBonus*4096)}} if killed by a huge unit<br />
            </div>
            </div>
        </uib-tab>
        <uib-tab heading="Acolytes">
            <div style="float: left;">
            <div class="unitBox">
              Word of your dungeon has spread far and wide. Your reputation allows you to recruit minions, monsters and acolytes to improve your dungeon.<br/>
              You currently have <span ng-bind="reputation"></span> reputation.</br>
              You earn <span ng-bind="reputationRate"></span> reputation per second.
              Space: <span id="population" ng-bind="population"></span>/<span id="maxPopulation" ng-bind="maxPopulation"></span><br/>
              Empty rooms: <span ng-bind="emptyRooms"></span><br />
            </div>
            <div class="unitBox">
              Acolytes go out and teach of your power, gaining you reputation.<br/>
            </div>
            <div class="unitBox">
              You currently have <span id="smallAcolyteCount" ng-bind="smallAcolytes"></span> small Acolytes, who earn you 10 rep/s. They take up 5 space each and cost 375 reputation.<br/>
              Progress towards next small acolyte:<br />
              <uib-progressbar class="progress-bar-custom" value="smallUnitProgressPercent">{{smallUnitETA}} {{smallUnitProgressPercentRounded}}%</uib-progressbar>
            <button id="buyAllSmallAcolytes" ng-click="dungeon.buyAllSmallAcolytes()" ng-bind="buyAllSmallAcolytesText">Buy All</button><button id="buyRoomOfSmallAcolytes" ng-bind="buyRoomOfSmallAcolytesText" ng-click="dungeon.buyRoomOfSmallAcolytes()">Fill Room</button><button id="buySmallAcolyte" ng-click="dungeon.buySmallAcolyte()">Buy Small Acolyte</button><br /><button id="sellSmallAcolyte" ng-click="dungeon.sellSmallAcolyte()">Dismiss Small Acolyte</button><button ng-click="dungeon.sellRoomOfSmallAcolytes()">Dismiss Room</button><br/>
            </div>
            <div class="unitBox">
              You currently have <span id="acolyteCount" ng-bind="acolytes"></span> acolytes, who earn you 160 rep/s. They take up 10 space each and cost 4k reputation.<br>
              Progress towards next acolyte:<br />
              <uib-progressbar class="progress-bar-custom" value="unitProgressPercent">{{unitETA}} {{unitProgressPercentRounded}}%</uib-progressbar>
            <button id="buyAllAcolytes" ng-click="dungeon.buyAllAcolytes()"ng-bind="buyAllAcolytesText">Buy All</button><button id="buyRoomOfAcolytes" ng-bind="buyRoomOfAcolytesText" ng-click="dungeon.buyRoomOfAcolytes()">Fill Room</button><button id="buyAcolyte" ng-click="dungeon.buyAcolyte()">Buy Acolyte</button><br /><button id="sellAcolyte" ng-click="dungeon.sellAcolyte()">Dismiss Acolyte</button><button ng-click="dungeon.sellRoomOfAcolytes()">Dismiss Room</button><br/>
            </div>
            </div>
            <div style="float: left;">
            <div class="unitBox">
              You currently have <span id="bigAcolyteCount" ng-bind="bigAcolytes"></span> big Acolytes, who earn you 2.56k rep/s. They take up 25 space each and cost 477.68k reputation.<br/>
              Progress towards next big acolyte:<br />
              <uib-progressbar class="progress-bar-custom" value="bigUnitProgressPercent">{{bigUnitETA}} {{bigUnitProgressPercentRounded}}%</uib-progressbar>
            <button id="buyAllBigAcolytes" ng-click="dungeon.buyAllBigAcolytes()" ng-bind="buyAllBigAcolytesText">Buy All</button><button id="buyRoomOfBigAcolytes" ng-bind="buyRoomOfBigAcolytesText" ng-click="dungeon.buyRoomOfBigAcolytes()">Fill Room</button><button id="buyBigAcolyte" ng-click="dungeon.buyBigAcolyte()">Buy Big Acolyte</button><br /><button id="sellBigAcolyte" ng-click="dungeon.sellBigAcolyte()">Dismiss Big Acolyte</button><button ng-click="dungeon.sellRoomOfBigAcolytes()">Dismiss Room</button><br/>
            </div>
            <div class="unitBox">
              You currently have <span id="hugeAcolyteCount" ng-bind="hugeAcolytes"></span> huge acolytes, who earn you 40.96k rep/s. They take up 50 space each and cost 71.01M reputation.<br/>
              Progress towards next huge acolyte:<br />
              <uib-progressbar class="progress-bar-custom" value="hugeUnitProgressPercent">{{hugeUnitETA}} {{hugeUnitProgressPercentRounded}}%</uib-progressbar>
              <button id="buyAllHugeAcolytes" ng-click="dungeon.buyAllHugeAcolytes()" ng-bind="buyAllHugeAcolytesText">Buy All</button><button id="buyHugeAcolyte" ng-click="dungeon.buyHugeAcolyte()">Buy Huge Acolyte</button><button id="sellHugeAcolyte" ng-click="dungeon.sellHugeAcolyte()">Dismiss Huge Acolyte</button><br/>
            </div>
            <div class="unitBox" style="float: top;">
                Progress towards next upgrade:<br />
                <uib-progressbar class="progress-bar-custom" value="acolyteUpgradeProgressPercent">{{acolyteUpgradeETA}} {{acolyteUpgradeProgressPercentRounded}}%</uib-progressbar>
                <button id='upgradeAcolytes' ng-click="dungeon.upgradeAcolytes()" ng-bind="upgradeAcolytesText">Upgrade Acolytes</button><br />
                Upgrading improves effectiveness of all acolyte units by 20%<br />
                Current Effectiveness: <span ng-bind="acolyteMultiplier"></span>%<br /><br />
                Progress towards next combat upgrade:<br />
                <uib-progressbar class="progress-bar-custom" value="unitCombatUpgradeProgressPercent">{{unitCombatUpgradeETA}} {{unitCombatUpgradeProgressPercentRounded}}%</uib-progressbar>
                <button ng-click="dungeon.upgradeUnitCombat()" ng-bind="upgradeUnitCombatText">Upgrade Minions and Acolytes in Combat</button><br/>
                Upgrading increases effectiveness of all non-monster units in combat by 2%<br />
                Current Effectiveness: <span ng-bind="unitCombatMultiplier"></span>%
            </div>
            </div>
            <div class="unitBox" style="float: left; height: '400';">
                <canvas id="acolyteChart" width="400" height="400"></canvas>
            </div>
        </uib-tab>
        <uib-tab heading="Adventurers">
            <div class="unitBox">
              <div>
                Adventurers are coming to your dungeon hoping to steal your treasure. The more treasure you have the more likely adventurers are to come and try to steal it, so make sure to guard it well with monsters.
              </div>
              <span id="adventurerCount" ng-bind="adventurers"></span> adventurers have died in your dungeon.<br/>
              You have hoarded <span id="treasureCount" ng-bind="treasure"></span> treasures.
            </div>
        </uib-tab>
        <uib-tab heading="Rooms">
            <div style="float: left;">
            <div class="unitBox" id="roomProgressPanel">
                Excavation progress:<br />
                <uib-progressbar class="progress-bar-custom" value="roomProgressPercent">{{roomETA}} {{roomProgressPercentRounded}}%</uib-progressbar>
            </div>
            <div class="unitBox" id="roomsPanel" style="float: left;">
                SAMPLE TEXT
            </div>
            </div>
            <div class="canvasContainer" id='mainCanvasContainer' style="width: 768px; height: 768; float: left;">
                <canvas height='768' id='mainCanvas' width='768' style="float: left; width: 768px;"></canvas>
            </div>
        </uib-tab>
        <uib-tab heading="DevTools">
            Dev Multiplier: <input type="number" ng-model="devMultiplier" /><button type="button" ng-click="setDevMultiplier()">OK</button><br />
            Timeskip: <input type="number" style="width: 50px;" ng-model="skipDays" />d<input type="number" style="width: 50px;" ng-model="skipHours" />h<input type="number" style="width: 50px;" ng-model="skipMinutes" />m<button type="button" ng-click="timeSkip()">OK</button>
        </uib-tab>
        <uib-tab heading="Settings">
            <button type="button" ng-click="toggleNarrationBox()">Toggle Narration Box</button><br />
            <input type="checkbox" ng-click="toggleAlerts()" checked>Toggle Alerts</button><br />
            <button type="button" ng-click="wipeOutSaveFile()">WIPE SAVE FILE</button>
        </uib-tab>
        <uib-tab heading="Redesign (WIP)">
            <uib-accordion close-others="false">
                <div uib-accordion-group is-open="unitsOpen" style="width: 1345px;">
                    <uib-accordion-heading>
                        <div><i class="pull-left glyphicon" ng-class="{'glyphicon-chevron-down': unitsOpen, 'glyphicon-chevron-right': !unitsOpen}"></i><span style="margin-left: 10px;">Units</span></div>
                    </uib-accordion-heading>
                    You currently have <span ng-bind="reputation"></span> reputation. <button ng-click="dungeon.ritual()" uib-tooltip="A ritual increases your available reputation." tooltip-placement="right-bottom" tooltip-append-to-body="true">Ritual</button><br />
                    You earn <span ng-bind="reputationRate"></span> reputation per second.<br />
                    Space: <span id="population" ng-bind="population"></span>/<span id="maxPopulation" ng-bind="maxPopulation"></span><br/>
                    Empty rooms: <span ng-bind="emptyRooms"></span> <button ng-click="dungeon.disintegrate()" uib-tooltip="Disintegration helps your minions dig rooms." tooltip-placement="right-bottom" tooltip-append-to-body="true">Disintegrate</button><br />
                    Excavation progress:<br />
                    <uib-progressbar class="progress-bar-custom" value="roomProgressPercent">{{roomETA}} {{roomProgressPercentRounded}}%</uib-progressbar>
                    <div class="unitRow">
                        <div class="unitHeaderText" uib-tooltip="Acolytes go out and teach of your power, gaining you reputation. Reputation allows you to recruit minions, monsters, and acolytes to improve your dungeon." tooltip-placement="right-bottom" tooltip-append-to-body="true">Acolytes</div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="smallAcolyteButton" uib-tooltip="Small acolytes earn you 10 rep/s. They take up 5 space each and cost 375 reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buySmallAcolyte()">
                                <div class="roundProgressImage">
                                    <img src="acolyte.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="smallUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{smallUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="smallUnitProgressPercentRounded!=100">{{smallUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="smallUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="smallAcolytes>0">x{{smallAcolytes}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades small acolytes to acolytes. Buys a room of acolytes, dismissing a room of small acolytes first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="acolyteButton" uib-tooltip="Acolytes earn you 160 rep/s. They take up 10 space each and cost 4k reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyAcolyte()">
                                <div class="roundProgressImage">
                                    <img src="acolyte.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="unitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{unitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="unitProgressPercentRounded!=100">{{unitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="unitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="acolytes>0">x{{acolytes}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades acolytes to big acolytes. Buys a room of big acolytes, dismissing a room of acolytes first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="bigAcolyteButton" uib-tooltip="Big acolytes earn you 2.56k rep/s. They take up 25 space each and cost 477.68k reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyBigAcolyte()">
                                <div class="roundProgressImage">
                                    <img src="acolyte.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="bigUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{bigUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="bigUnitProgressPercentRounded!=100">{{bigUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="bigUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="bigAcolytes>0">x{{bigAcolytes}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades big acolytes to huge acolytes. Buys a huge acolyte, dismissing a room of big acolytes first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="hugeAcolyteButton" uib-tooltip="Huge acolytes earn you 40.96k rep/s. They take up 50 space each and cost 71.01M reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyHugeAcolyte()">
                                <div class="roundProgressImage">
                                    <img src="acolyte.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="hugeUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{hugeUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="hugeUnitProgressPercentRounded!=100">{{hugeUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="hugeUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="hugeAcolytes>0">x{{hugeAcolytes}}</span>
                        </div>
                        <div class="newUnitBox" style="margin-left: 60px;">
                            <div class="outerRoundProgressWrapper" uib-tooltip="{{upgradeAcolytesText}}." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-click="dungeon.upgradeAcolytes()">
                                <div class="roundProgressImage">
                                    <img src="plus.png" style="width: 64px; height: 64px;"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="acolyteUpgradeProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{acolyteUpgradeETA}}<br />
                                    <span style="font-size: 15px;" ng-show="acolyteUpgradeProgressPercentRounded!=100">{{acolyteUpgradeProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="acolyteUpgradeProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="unitRow">
                        <div class="unitHeaderText" uib-tooltip="Minions dig additional rooms in your dungeon. Rooms limit how many units you can have." tooltip-placement="right-bottom" tooltip-append-to-body="true">Minions</div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="smallMinionButton" uib-tooltip="Small minions produce 10 labor/s. They take up 5 space each and cost 375 reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buySmallMinion()">
                                <div class="roundProgressImage">
                                    <img src="minion.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="smallUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{smallUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="smallUnitProgressPercentRounded!=100">{{smallUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="smallUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="smallMinions>0">x{{smallMinions}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades small minions to minions. Buys a room of minions, dismissing a room of small minions first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="minionButton" uib-tooltip="Minions produce 160 labor/s. They take up 10 space each and cost 4k reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyMinion()">
                                <div class="roundProgressImage">
                                    <img src="minion.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="unitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{unitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="unitProgressPercentRounded!=100">{{unitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="unitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="minions>0">x{{minions}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades minions to big minions. Buys a room of big minions, dismissing a room of minions first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="bigMinionButton" uib-tooltip="Big minions produce 2.56k labor/s. They take up 25 space each and cost 477.68k reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyBigMinion()">
                                <div class="roundProgressImage">
                                    <img src="minion.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="bigUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{bigUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="bigUnitProgressPercentRounded!=100">{{bigUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="bigUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="bigMinions>0">x{{bigMinions}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades big minions to huge minions. Buys a huge minion, dismissing a room of big minions first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="hugeMinionButton" uib-tooltip="Huge minions produce 40.96k labor/s. They take up 50 space each and cost 71.01M reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyHugeMinion()">
                                <div class="roundProgressImage">
                                    <img src="minion.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="hugeUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{hugeUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="hugeUnitProgressPercentRounded!=100">{{hugeUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="hugeUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="hugeMinions>0">x{{hugeMinions}}</span>
                        </div>
                        <div class="newUnitBox" style="margin-left: 60px;">
                            <div class="outerRoundProgressWrapper" uib-tooltip="{{upgradeMinionsText}}." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-click="dungeon.upgradeMinions()">
                                <div class="roundProgressImage">
                                    <img src="plus.png" style="width: 64px; height: 64px;"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="minionUpgradeProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{minionUpgradeETA}}<br />
                                    <span style="font-size: 15px;" ng-show="minionUpgradeProgressPercentRounded!=100">{{minionUpgradeProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="minionUpgradeProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="unitRow">
                        <div class="unitHeaderText" uib-tooltip="Monsters defend your dungeon from adventurers who wish to steal your treasure." tooltip-placement="right-bottom" tooltip-append-to-body="true">Monsters</div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="smallMonsterButton" uib-tooltip="Small monsters have 4 hp and deal 1 damage. They take up 5 space each and cost 375 reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buySmallMonster()">
                                <div class="roundProgressImage">
                                    <img src="monster.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="smallUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{smallUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="smallUnitProgressPercentRounded!=100">{{smallUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="smallUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="smallMonsters>0">x{{smallMonsters}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades small monsters to monsters. Buys a room of monsters, dismissing a room of small monsters first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="monsterButton" uib-tooltip="Monsters have 64 hp and deal 4-15 damage. They take up 10 space each and cost 4k reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyMonster()">
                                <div class="roundProgressImage">
                                    <img src="monster.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="unitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{unitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="unitProgressPercentRounded!=100">{{unitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="unitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="monsters>0">x{{monsters}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades monsters to big monsters. Buys a room of big monsters, dismissing a room of monsters first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="bigMonsterButton" uib-tooltip="Big monsters have 1.02k hp and deal 62-240 damage. They take up 25 space each and cost 477.68k reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyBigMonster()">
                                <div class="roundProgressImage">
                                    <img src="monster.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="bigUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{bigUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="bigUnitProgressPercentRounded!=100">{{bigUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="bigUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="bigMonsters>0">x{{bigMonsters}}</span>
                        </div>
                        <div class="upgradeArrow" uib-tooltip="Upgrades big monsters to huge monsters. Buys a huge monster, dismissing a room of big monsters first if needed." tooltip-placement="right-bottom" tooltip-append-to-body="true">
                            <img src="rightArrow.png"></img>
                        </div>
                        <div class="newUnitBox">
                            <div class="outerRoundProgressWrapper" id="hugeMonsterButton" uib-tooltip="Huge monsters have 16.38k hp and deal 1.02k-3.84k damage. They take up 50 space each and cost 71.01M reputation. Click to buy. Right-click for more options." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-right-click="showContextMenu($event)" ng-click="dungeon.buyHugeMonster()">
                                <div class="roundProgressImage">
                                    <img src="monster.png"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="hugeUnitProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{hugeUnitETA}}<br />
                                    <span style="font-size: 15px;" ng-show="hugeUnitProgressPercentRounded!=100">{{hugeUnitProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="hugeUnitProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                            <span ng-show="hugeMonsters>0">x{{hugeMonsters}}</span>
                        </div>
                        <div class="newUnitBox" style="margin-left: 60px;">
                            <div class="outerRoundProgressWrapper" uib-tooltip="{{upgradeMonstersText}}." tooltip-placement="right-bottom" tooltip-append-to-body="true" ng-click="dungeon.upgradeMonsters()">
                                <div class="roundProgressImage">
                                    <img src="plus.png" style="width: 64px; height: 64px;"></img>
                                </div>
                                <div class="roundProgressCircle" ng-show="monsterUpgradeProgressPercentRounded!=100"></div>
                                <div class="roundProgressText">
                                    <br />{{monsterUpgradeETA}}<br />
                                    <span style="font-size: 15px;" ng-show="monsterUpgradeProgressPercentRounded!=100">{{monsterUpgradeProgressPercentRounded}}%</span>
                                </div>
                                <div class="roundProgressWrapper">
                                    <round-progress current="monsterUpgradeProgressPercent" max="100" radius="50"></round-progress>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </uib-accordion>
        </uib-tab>
    </uib-tabset>
    <div style="position: absolute; bottom: 0; width: 400px">
    <div uib-alert id='alerts' style="width: 400px" ng-repeat="alert in alerts" ng-class="'alert-' + (alert.type || 'warning')" close="closeAlert($index)" dismiss-on-timeout="10000" ng-hide="alert.expired=='true'">{{alert.msg}}
    </div>
    </div>
    <div class="unitBox" id='roomTooltip' style="visibility: hidden; position: absolute;"></div>
    <div uib-dropdown is-open="contextMenuOpen" dropdown-append-to-body="true" on-toggle="dropdownToggle()">
        <div uib-dropdown-menu>
            <ul id="dropdownMenu" class="dropdown-menu" uib-dropdown-menu role="menu" style="display: none; position: absolute; z-index: 100000" ng-style="{'left': menuX+'px', 'top': menuY+'px'}">
            </ul>
        </div>
    </div>
  </body>
</html>
